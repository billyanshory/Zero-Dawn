<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Floor Plan Drawer - Web Edition</title>
    <!-- Fonts: Segoe UI for Windows feel, or Inter as fallback -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- PDF Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/denah_style.css') }}">
</head>
<body>
    <!-- Main Canvas -->
    <canvas id="app-canvas"></canvas>

    <!-- HUD (Heads Up Display) -->
    <div id="hud-container" class="glass-panel">
        <div id="hud-mode">Mode: XY</div>
        <div id="hud-stats">Segments: 0 | Walls: 0</div>
        <div id="hud-cam">Zoom: 1.00x | Yaw: 0째</div>
        <div id="hud-input" style="display:none">Input: <span id="hud-input-value"></span></div>
    </div>

    <!-- Toolbar -->
    <div id="toolbar" class="glass-panel">
        <button id="btn-help" class="tool-btn" title="Help (Left Click) / Toggle (Right Click)">
            <i class="fas fa-question-circle"></i>
        </button>
        <div class="separator"></div>
        <button id="btn-extrude" class="tool-btn" title="Extrude Mode">
            <i class="fas fa-cube"></i>
        </button>
        <button id="btn-select" class="tool-btn" title="Select Mode">
            <i class="fas fa-mouse-pointer"></i>
        </button>
        <button id="btn-size" class="tool-btn" title="Size Tool">
            <i class="fas fa-ruler-combined"></i>
        </button>
        <div class="separator"></div>
        <button id="btn-theme" class="tool-btn" title="Toggle Theme">
            <i class="fas fa-palette"></i>
        </button>
        <div class="separator"></div>
        <button id="btn-undo" class="tool-btn" title="Undo (Z)">
            <i class="fas fa-undo"></i>
        </button>
        <button id="btn-redo" class="tool-btn" title="Redo (Y)">
            <i class="fas fa-redo"></i>
        </button>
        <div class="separator"></div>
        <button id="btn-clear" class="tool-btn" title="Clear All (C)">
            <i class="fas fa-trash"></i>
        </button>
        <button id="btn-export" class="tool-btn" title="Export (Ctrl+E)">
            <i class="fas fa-file-export"></i>
        </button>
    </div>

    <!-- Camera Controls (Pitch) -->
    <div id="cam-controls" class="glass-panel">
        <button class="cam-btn" data-pitch="0">Front 0째</button>
        <button class="cam-btn" data-pitch="45">ISO 45째</button>
        <button class="cam-btn" data-pitch="90">Top 90째</button>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="glass-modal" style="display: none;">
        <div class="modal-content">
            <h3>Controls</h3>
            <ul>
                <li><strong>Left Click:</strong> Start/End Line, Select, Confirm</li>
                <li><strong>Right Click:</strong> Cancel action</li>
                <li><strong>Drag (Select Mode):</strong> Lasso Select</li>
                <li><strong>W/A/S/D:</strong> Pan Camera</li>
                <li><strong>Arrow Keys:</strong> Rotate/Zoom</li>
                <li><strong>Scroll:</strong> Zoom</li>
                <li><strong>G:</strong> Toggle Grid Snap</li>
                <li><strong>M:</strong> Toggle Dimensions</li>
                <li><strong>H:</strong> Height Tool (Vertical Lines)</li>
                <li><strong>Number Keys:</strong> Type measurement (m)</li>
            </ul>
            <button id="close-help">Close</button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="glass-toast">Notification</div>

    <script type="module" src="{{ url_for('static', filename='js/denah_logic.js') }}"></script>
</body>
</html>
